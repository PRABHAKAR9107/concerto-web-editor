{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator\";\nvar _jsxFileName = \"/home/kanav/gsoc_/concerto-web-editor/src/components/main_area_component/components/BodyWidget.js\";\nimport * as React from 'react';\nimport * as _ from 'lodash';\nimport { Application } from '../Application';\nimport { DefaultNodeModel } from '@projectstorm/react-diagrams';\nimport { CanvasWidget } from '@projectstorm/react-canvas-core';\nimport './style.css';\nimport { AdvancedPortModel } from '../custom-link/Arrow';\nimport { JSCustomNodeModel } from '../custom-node-js/JSCustomNodeModel';\nexport class BodyWidget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: [],\n      currentItem: {\n        text: '',\n        key: ''\n      }\n    };\n    this.handleInput = this.handleInput.bind(this);\n    this.addItem = this.addItem.bind(this);\n    this.deleteItem = this.deleteItem.bind(this);\n    this.setUpdate = this.setUpdate.bind(this);\n  }\n\n  handleInput(e) {\n    this.setState({\n      currentItem: {\n        text: e.target.value,\n        key: Date.now()\n      }\n    });\n  }\n\n  addItem(e) {\n    e.preventDefault();\n    const newItem = this.state.currentItem;\n\n    if (newItem.text !== \"\") {\n      console.log(newItem);\n      const newItems = [...this.state.items, newItem];\n      this.setState({\n        items: newItems,\n        currentItem: {\n          text: \"\",\n          key: \"\"\n        }\n      });\n    }\n  }\n\n  deleteItem(key) {\n    const filteredItems = this.state.items.filter(item => item.key !== key);\n    this.setState({\n      items: filteredItems\n    });\n  }\n\n  setUpdate(text, key) {\n    const items = this.state.items;\n    items.map(item => {\n      if (item.key === key) {\n        item.text = text;\n      }\n    });\n    this.setState({\n      items: items\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      onDrop: event => {\n        var data = JSON.parse(event.dataTransfer.getData('storm-diagram-node'));\n        var ports = [{\n          text: \"String Dela\",\n          color: \"grey\",\n          isIn: true\n        }, {\n          text: \"String Off\",\n          color: \"grey\",\n          isIn: true\n        }];\n        var node = new JSCustomNodeModel({\n          name: data.name,\n          color: data.color,\n          ports\n        }); //node.addPort(new AdvancedPortModel(true, 'in'));\n\n        node.addPort(new AdvancedPortModel(false, data.type)); //matlab isse arrow aa raha hai but true ,in set krne se ni aaraha\n\n        var point = this.props.app.getDiagramEngine().getRelativeMousePoint(event);\n        node.setPosition(point);\n        this.props.app.getDiagramEngine().getModel().addNode(node);\n        this.forceUpdate();\n      },\n      onDragOver: event => {\n        event.preventDefault();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(CanvasWidget, {\n      className: \"srd-demo-canvas\",\n      engine: this.props.app.getDiagramEngine(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }));\n  }\n\n}\nBodyWidget.displayName = \"BodyWidget\";\nBodyWidget.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"handleInput\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"e\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"addItem\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"e\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"deleteItem\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"key\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"setUpdate\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"text\",\n      \"type\": null\n    }, {\n      \"name\": \"key\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"BodyWidget\",\n  \"props\": {\n    \"app\": {\n      \"required\": true,\n      \"flowType\": {\n        \"name\": \"Application\"\n      },\n      \"description\": \"\"\n    }\n  }\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src/components/main_area_component/components/BodyWidget.js\"] = {\n    name: \"BodyWidget\",\n    docgenInfo: BodyWidget.__docgenInfo,\n    path: \"src/components/main_area_component/components/BodyWidget.js\"\n  };\n}","map":{"version":3,"sources":["/home/kanav/gsoc_/concerto-web-editor/src/components/main_area_component/components/BodyWidget.js"],"names":["React","_","Application","DefaultNodeModel","CanvasWidget","AdvancedPortModel","JSCustomNodeModel","BodyWidget","Component","constructor","props","state","items","currentItem","text","key","handleInput","bind","addItem","deleteItem","setUpdate","e","setState","target","value","Date","now","preventDefault","newItem","console","log","newItems","filteredItems","filter","item","map","render","event","data","JSON","parse","dataTransfer","getData","ports","color","isIn","node","name","addPort","type","point","app","getDiagramEngine","getRelativeMousePoint","setPosition","getModel","addNode","forceUpdate"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as _ from 'lodash';\nimport { Application } from '../Application';\nimport { DefaultNodeModel } from '@projectstorm/react-diagrams';\nimport { CanvasWidget } from '@projectstorm/react-canvas-core';\nimport './style.css';\nimport { AdvancedPortModel } from '../custom-link/Arrow';\nimport { JSCustomNodeModel } from '../custom-node-js/JSCustomNodeModel'\nexport interface BodyWidgetProps {\n\tapp: Application;\n}\n\nexport class BodyWidget extends React.Component<BodyWidgetProps> {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t  items:[],\n\t\t  currentItem:{\n\t\t\ttext:'',\n\t\t\tkey:''\n\t\t  }\n\t\t}\n\t\tthis.handleInput=this.handleInput.bind(this);\n\t\tthis.addItem=this.addItem.bind(this);\n\t\tthis.deleteItem=this.deleteItem.bind(this);\n\t\tthis.setUpdate=this.setUpdate.bind(this);\n\t  }\n\t\n\t  handleInput(e){\n\t\tthis.setState({\n\t\t  currentItem:{\n\t\t\ttext:e.target.value,\n\t\t\tkey:Date.now()\n\t\t  }\n\t\t})\n\t  }\n\t\n\t  addItem(e){\n\t\te.preventDefault();\n\t\tconst newItem=this.state.currentItem;\n\t\t\n\t\tif(newItem.text !==\"\"){\n\t\t  console.log(newItem);\n\t\t  const newItems =[...this.state.items,newItem];\n\t\t  this.setState({\n\t\t\titems:newItems,\n\t\t\tcurrentItem:{\n\t\t\t  text:\"\",\n\t\t\t  key:\"\"\n\t\t\t}\n\t\t  })\n\t\n\t\t}\n\t  }\n\t\n\t  deleteItem(key){\n\t\tconst filteredItems=this.state.items.filter(item => \n\t\t\titem.key!==key );\n\t\tthis.setState({\n\t\t  items:filteredItems\n\t\t})\n\t  }\n\t\n\t  setUpdate(text,key){\n\t\tconst items=this.state.items;\n\t\titems.map(item =>{\n\t\t  if(item.key === key){\n\t\t\titem.text=text;\n\t\t  }\n\t\t})\n\t\tthis.setState({\n\t\t  items:items\n\t\t})\n\t  }\n\trender() {\n\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonDrop={event => {\n\t\t\t\t\t\t\tvar data = JSON.parse(event.dataTransfer.getData('storm-diagram-node'));\n\n\t\t\t\t\t\t\tvar ports = [                                                \n\t\t\t\t\t\t\t\t{ text: \"String Dela\", color: \"grey\", isIn: true },\n\t\t\t\t\t\t\t\t { text: \"String Off\", color: \"grey\", isIn: true },\n\t\t\t\t\t\t\t  ]\n\n\t\t\t\t\t\t\tvar node = new JSCustomNodeModel({ name: data.name, color: data.color, ports });\n\t\t\t\t\t\t\t//node.addPort(new AdvancedPortModel(true, 'in'));\n\t\t\t\t\t\t\tnode.addPort(new AdvancedPortModel(false, data.type)); //matlab isse arrow aa raha hai but true ,in set krne se ni aaraha\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\tvar point = this.props.app.getDiagramEngine().getRelativeMousePoint(event);\n\t\t\t\t\t\t\tnode.setPosition(point);\n\t\t\t\t\t\t\tthis.props.app\n\t\t\t\t\t\t\t\t.getDiagramEngine()\n\t\t\t\t\t\t\t\t.getModel()\n\t\t\t\t\t\t\t\t.addNode(node);\n\t\t\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonDragOver={event => {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<CanvasWidget className=\"srd-demo-canvas\" engine={this.props.app.getDiagramEngine()} />\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\n\t\t);\n\t}\n}"]},"metadata":{},"sourceType":"module"}