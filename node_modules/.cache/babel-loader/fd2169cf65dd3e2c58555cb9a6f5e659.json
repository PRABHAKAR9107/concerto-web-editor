{"ast":null,"code":"import\"core-js/modules/es.string.link\";import _createClass from\"/home/kanav/GSOC/concerto-web-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _classCallCheck from\"/home/kanav/GSOC/concerto-web-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _possibleConstructorReturn from\"/home/kanav/GSOC/concerto-web-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/kanav/GSOC/concerto-web-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/kanav/GSOC/concerto-web-editor/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";var _this=this;import React from\"react\";import{DefaultPortModel,DefaultLinkFactory,DefaultLinkModel,DefaultLinkWidget}from\"@projectstorm/react-diagrams\";import{LinkWidget,PointModel}from\"@projectstorm/react-diagrams-core\";export var AdvancedLinkModel=/*#__PURE__*/function(_DefaultLinkModel){_inherits(AdvancedLinkModel,_DefaultLinkModel);function AdvancedLinkModel(){_classCallCheck(this,AdvancedLinkModel);return _possibleConstructorReturn(this,_getPrototypeOf(AdvancedLinkModel).call(this,{type:\"advanced\",width:4}))}return AdvancedLinkModel}(DefaultLinkModel);export var AdvancedPortModel=/*#__PURE__*/function(_DefaultPortModel){_inherits(AdvancedPortModel,_DefaultPortModel);function AdvancedPortModel(){_classCallCheck(this,AdvancedPortModel);return _possibleConstructorReturn(this,_getPrototypeOf(AdvancedPortModel).apply(this,arguments))}_createClass(AdvancedPortModel,[{key:\"createLinkModel\",value:function createLinkModel(){return new AdvancedLinkModel}}]);return AdvancedPortModel}(DefaultPortModel);var CustomLinkArrowWidget=function(props){var point=props.point,previousPoint=props.previousPoint,angle=90+180*Math.atan2(point.getPosition().y-previousPoint.getPosition().y,point.getPosition().x-previousPoint.getPosition().x)/Math.PI;//translate(50, -10),\nreturn React.createElement(\"g\",{className:\"arrow\",transform:\"translate(\"+point.getPosition().x+\", \"+point.getPosition().y+\")\"},React.createElement(\"g\",{style:{transform:\"rotate(\"+angle+\"deg)\"}},React.createElement(\"g\",{transform:\"translate(0, -3)\"},React.createElement(\"polygon\",{points:\"0,10 8,30 -8,30\",fill:props.color,onMouseLeave:function onMouseLeave(){_this.setState({selected:!1})},onMouseEnter:function onMouseEnter(){_this.setState({selected:!0})},\"data-id\":point.getID(),\"data-linkid\":point.getLink().getID()}))))};CustomLinkArrowWidget.displayName=\"CustomLinkArrowWidget\";export var AdvancedLinkWidget=/*#__PURE__*/function(_DefaultLinkWidget){_inherits(AdvancedLinkWidget,_DefaultLinkWidget);function AdvancedLinkWidget(){_classCallCheck(this,AdvancedLinkWidget);return _possibleConstructorReturn(this,_getPrototypeOf(AdvancedLinkWidget).apply(this,arguments))}_createClass(AdvancedLinkWidget,[{key:\"generateArrow\",value:function generateArrow(point,previousPoint){return React.createElement(CustomLinkArrowWidget,{key:point.getID(),point:point,previousPoint:previousPoint,colorSelected:this.props.link.getOptions().selectedColor,color:this.props.link.getOptions().color})}},{key:\"render\",value:function render(){var _this2=this,points=this.props.link.getPoints(),paths=[];this.refPaths=[];//draw the multiple anchors and complex line instead\nfor(var _loop=function(j){paths.push(_this2.generateLink(LinkWidget.generateLinePath(points[j],points[j+1]),{\"data-linkid\":_this2.props.link.getID(),\"data-point\":j,onMouseDown:function onMouseDown(event){_this2.addPointToLink(event,j+1)}},j))},j=0;j<points.length-1;j++){_loop(j)}//render the circles\nfor(var i=1;i<points.length-1;i++){paths.push(this.generatePoint(points[i]))}if(null!==this.props.link.getTargetPort()){paths.push(this.generateArrow(points[points.length-1],points[points.length-2]))}else{paths.push(this.generatePoint(points[points.length-1]))}return React.createElement(\"g\",{\"data-default-link-test\":this.props.link.getOptions().testName},paths)}}]);return AdvancedLinkWidget}(DefaultLinkWidget);AdvancedLinkWidget.displayName=\"AdvancedLinkWidget\";export var AdvancedLinkFactory=/*#__PURE__*/function(_DefaultLinkFactory){_inherits(AdvancedLinkFactory,_DefaultLinkFactory);function AdvancedLinkFactory(){_classCallCheck(this,AdvancedLinkFactory);return _possibleConstructorReturn(this,_getPrototypeOf(AdvancedLinkFactory).call(this,\"advanced\"))}_createClass(AdvancedLinkFactory,[{key:\"generateModel\",value:function generateModel(){return new AdvancedLinkModel}},{key:\"generateReactWidget\",value:function generateReactWidget(event){return React.createElement(AdvancedLinkWidget,{link:event.model,diagramEngine:this.engine})}}]);return AdvancedLinkFactory}(DefaultLinkFactory);AdvancedLinkWidget.__docgenInfo={description:\"\",methods:[{name:\"generateArrow\",docblock:null,modifiers:[],params:[{name:\"point\",type:{name:\"PointModel\",alias:\"PointModel\"}},{name:\"previousPoint\",type:{name:\"PointModel\",alias:\"PointModel\"}}],returns:{type:{name:\"JSX.Element\"}}}],displayName:\"AdvancedLinkWidget\"};if(\"undefined\"!=typeof STORYBOOK_REACT_CLASSES){STORYBOOK_REACT_CLASSES[\"src/components/main_area_component/custom-link/Arrow.js\"]={name:\"AdvancedLinkWidget\",docgenInfo:AdvancedLinkWidget.__docgenInfo,path:\"src/components/main_area_component/custom-link/Arrow.js\"}}","map":{"version":3,"sources":["/home/kanav/GSOC/concerto-web-editor/src/components/main_area_component/custom-link/Arrow.js"],"names":["React","DefaultPortModel","DefaultLinkFactory","DefaultLinkModel","DefaultLinkWidget","LinkWidget","PointModel","AdvancedLinkModel","type","width","AdvancedPortModel","CustomLinkArrowWidget","props","point","previousPoint","angle","Math","atan2","getPosition","y","x","PI","transform","color","setState","selected","getID","getLink","AdvancedLinkWidget","link","getOptions","selectedColor","points","getPoints","paths","refPaths","j","push","generateLink","generateLinePath","onMouseDown","event","addPointToLink","length","i","generatePoint","getTargetPort","generateArrow","testName","AdvancedLinkFactory","model","engine"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    DefaultPortModel,\n    DefaultLinkFactory,\n    DefaultLinkModel,\n    DefaultLinkWidget,\n\n} from '@projectstorm/react-diagrams';\nimport { LinkWidget, PointModel } from '@projectstorm/react-diagrams-core';\n\n\nexport class AdvancedLinkModel extends DefaultLinkModel {\n    constructor() {\n        super({\n            type: 'advanced',\n            width: 4\n        });\n    }\n}\n \nexport class AdvancedPortModel extends DefaultPortModel {\n    createLinkModel(): AdvancedLinkModel | null {\n        return new AdvancedLinkModel();\n    }\n}\n \nconst CustomLinkArrowWidget = props => {\n    const { point, previousPoint } = props;\n \n    const angle =\n        90 +\n        (Math.atan2(\n            point.getPosition().y - previousPoint.getPosition().y,\n            point.getPosition().x - previousPoint.getPosition().x\n        ) *\n            180) /\n            Math.PI;\n \n    //translate(50, -10),\n    return (\n        <g className=\"arrow\" transform={'translate(' + point.getPosition().x + ', ' + point.getPosition().y + ')'}>\n            <g style={{ transform: 'rotate(' + angle + 'deg)' }}>\n                <g transform={'translate(0, -3)'}>\n                    <polygon\n                        points=\"0,10 8,30 -8,30\"\n                        fill={props.color}\n                        onMouseLeave={() => {\n                            this.setState({ selected: false });\n                        }}\n                        onMouseEnter={() => {\n                            this.setState({ selected: true });\n                        }}\n                        data-id={point.getID()}\n                        data-linkid={point.getLink().getID()}></polygon>\n                </g>\n            </g>\n        </g>\n    );\n};\n \nexport class AdvancedLinkWidget extends DefaultLinkWidget {\n    generateArrow(point: PointModel, previousPoint: PointModel): JSX.Element {\n        return (\n            <CustomLinkArrowWidget\n                key={point.getID()}\n                point={point}\n                previousPoint={previousPoint}\n                colorSelected={this.props.link.getOptions().selectedColor}\n                color={this.props.link.getOptions().color}\n            />\n        );\n    }\n \n    render() {\n        //ensure id is present for all points on the path\n        var points = this.props.link.getPoints();\n        var paths = [];\n        this.refPaths = [];\n \n        //draw the multiple anchors and complex line instead\n        for (let j = 0; j < points.length - 1; j++) {\n            paths.push(\n                this.generateLink(\n                    LinkWidget.generateLinePath(points[j], points[j + 1]),\n                    {\n                        'data-linkid': this.props.link.getID(),\n                        'data-point': j,\n                        onMouseDown: (event: MouseEvent) => {\n                            this.addPointToLink(event, j + 1);\n                        }\n                    },\n                    j\n                )\n            );\n        }\n \n        //render the circles\n        for (let i = 1; i < points.length - 1; i++) {\n            paths.push(this.generatePoint(points[i]));\n        }\n \n        if (this.props.link.getTargetPort() !== null) {\n            paths.push(this.generateArrow(points[points.length - 1], points[points.length - 2]));\n        } else {\n            paths.push(this.generatePoint(points[points.length - 1]));\n        }\n \n        return <g data-default-link-test={this.props.link.getOptions().testName}>{paths}</g>;\n    }\n}\n \nexport class AdvancedLinkFactory extends DefaultLinkFactory {\n    constructor() {\n        super('advanced');\n    }\n \n    generateModel(): AdvancedLinkModel {\n        return new AdvancedLinkModel();\n    }\n \n    generateReactWidget(event): JSX.Element {\n        return <AdvancedLinkWidget link={event.model} diagramEngine={this.engine} />;\n    }\n}"]},"metadata":{},"sourceType":"module"}